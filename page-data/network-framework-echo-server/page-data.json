{"componentChunkName":"component---src-templates-post-jsx","path":"/network-framework-echo-server/","result":{"data":{"site":{"siteMetadata":{"title":"myunggon"}},"markdownRemark":{"id":"c76b8cbc-228c-5e2e-bff3-d31a6f4cced1","excerpt":"Swift에서 저수준 소켓을 직접 다루지 않고도, 연결 생성/수신/송수신을 깔끔하게 구성할 수 있는 프레임워크가 입니다. 이 글에서는 핵심 타입을 빠르게 정리한 뒤, 에코 서버(Echo Server) 를 간단히 구현/테스트하는 흐름으로 정리합니다.  간단한 TCP 서버/클라이언트를 만들 때 기존 BSD Socket 기반 구현은 설정/에러 처리/상태 관리가…","html":"<p>Swift에서 저수준 소켓을 직접 다루지 않고도, <strong>연결 생성/수신/송수신</strong>을 깔끔하게 구성할 수 있는 프레임워크가 <code class=\"language-text\">Network.framework</code>입니다.<br>\n이 글에서는 핵심 타입을 빠르게 정리한 뒤, <strong>에코 서버(Echo Server)</strong> 를 간단히 구현/테스트하는 흐름으로 정리합니다.</p>\n<h2 id=\"Networkframework\" style=\"position:relative;\"><a href=\"#Networkframework\" aria-label=\"Networkframework permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><code class=\"language-text\">Network.framework</code></h2>\n<p>간단한 TCP 서버/클라이언트를 만들 때 기존 BSD Socket 기반 구현은 설정/에러 처리/상태 관리가 번거로운 편입니다.  <code class=\"language-text\">Network.framework</code>를 사용하면 다음을 비교적 직관적으로 구성할 수 있습니다.</p>\n<ul>\n<li>서버: 리슨(포트 바인딩) → 인바운드 연결 수락 → 수신/응답 루프</li>\n<li>클라이언트: 연결 → 상태 관찰 → 송신 → 수신</li>\n</ul>\n<p>네트워크 연결을 생성한 후, HTTP 또는 TLS와 같은 전송 및 보안 프로토콜을 사용해 데이터를 주고받습니다.<br>\n이번 글에서는 연결 및 송수신의 뼈대를 이해하는 데 필요한 대표 타입 3개를 중심으로 봅니다.</p>\n<h3 id=\"NWEndpoint\" style=\"position:relative;\"><a href=\"#NWEndpoint\" aria-label=\"NWEndpoint permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>NWEndpoint</h3>\n<p>로컬 또는 외부 엔드포인트를 표현합니다. 연결의 목적지를 지정할 때 사용합니다.</p>\n<ul>\n<li><code class=\"language-text\">hostPort(host:port:)</code>: 호스트/포트 조합 엔드포인트</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> endPoint <span class=\"token operator\">=</span> <span class=\"token class-name\">NWEndpoint</span><span class=\"token punctuation\">.</span><span class=\"token function\">hostPort</span><span class=\"token punctuation\">(</span>\n  host<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWEndpoint</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Host</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"127.0.0.1\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  port<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWEndpoint</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Port</span><span class=\"token punctuation\">(</span>integerLiteral<span class=\"token punctuation\">:</span> <span class=\"token number\">9999</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"NWListener\" style=\"position:relative;\"><a href=\"#NWListener\" aria-label=\"NWListener permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>NWListener</h3>\n<p>네트워크 연결 요청을 수신할 때 사용하는 리스닝 객체입니다. 서버 측의 시작점입니다.</p>\n<ul>\n<li><code class=\"language-text\">start(queue:)</code>: 리스너를 시작하고 이벤트를 처리할 큐를 지정합니다.</li>\n<li><code class=\"language-text\">newConnectionHandler</code>: 들어오는 연결을 수락한 뒤 세션 처리를 시작하는 핸들러입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">func</span> <span class=\"token function-definition function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  listener<span class=\"token punctuation\">.</span>newConnectionHandler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> connection <span class=\"token keyword\">in</span>\n    <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleConnection</span><span class=\"token punctuation\">(</span>connection<span class=\"token punctuation\">:</span> connection<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  listener<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">:</span> listenerQueue<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"NWConnection\" style=\"position:relative;\"><a href=\"#NWConnection\" aria-label=\"NWConnection permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>NWConnection</h3>\n<p>로컬과 원격 엔드포인트 간의 데이터 연결(세션)입니다. 서버/클라이언트 양쪽에서 모두 사용합니다.</p>\n<ul>\n<li><code class=\"language-text\">start(queue:)</code>: 연결을 시작하고 이벤트를 처리할 큐를 지정합니다.</li>\n<li><code class=\"language-text\">stateUpdateHandler</code>: 연결 상태가 바뀔 때마다 호출됩니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">func</span> <span class=\"token function-definition function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  connection<span class=\"token punctuation\">.</span>stateUpdateHandler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> state <span class=\"token keyword\">in</span>\n    <span class=\"token keyword\">switch</span> state <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span>            <span class=\"token comment\">// 초기 상태</span>\n    <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token function\">waiting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>     <span class=\"token comment\">// 네트워크 대기/재시도 상황</span>\n      <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>preparing<span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span>        <span class=\"token comment\">// 연결 준비</span>\n    <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>ready<span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span>            <span class=\"token comment\">// 연결 성공 (송수신 가능)</span>\n    <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token function\">failed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>      <span class=\"token comment\">// 연결 실패</span>\n      <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>cancelled<span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span>        <span class=\"token comment\">// 연결 취소</span>\n    <span class=\"token attribute atrule\">@unknown</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">break</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token function\">global</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">send(content:contentContext:isComplete:completion:)</code>: 활성 연결을 통해 데이터를 전송합니다.\n<ul>\n<li><code class=\"language-text\">content</code>: 보낼 <code class=\"language-text\">Data?</code> (nil이면 “콘텐츠 없는 프레임” 성격)</li>\n<li><code class=\"language-text\">contentContext</code>: 메시지 메타데이터(프로토콜/우선순위 등). 일반적인 TCP 스트림에서는 <code class=\"language-text\">.defaultMessage</code></li>\n<li><code class=\"language-text\">isComplete</code>: 이 send가 “메시지 경계”로 완결되는지 표시(스트림에서도 프레이밍 힌트로 사용)</li>\n<li><code class=\"language-text\">completion</code>: 전송 결과 콜백(에러 포함)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"에코-서버-Echo-Server\" style=\"position:relative;\"><a href=\"#%EC%97%90%EC%BD%94-%EC%84%9C%EB%B2%84-Echo-Server\" aria-label=\"에코 서버 Echo Server permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>에코 서버 (Echo Server)</h2>\n<p>에코 서버는 클라이언트로부터 받은 데이터를 <strong>그대로 다시 돌려주는</strong> 서버입니다. 구현이 단순해서 네트워크 학습/테스트에 자주 사용됩니다.</p>\n<h3 id=\"주요-사용-목적\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EC%82%AC%EC%9A%A9-%EB%AA%A9%EC%A0%81\" aria-label=\"주요 사용 목적 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>주요 사용 목적</h3>\n<ul>\n<li><strong>네트워크 테스트</strong>: 소켓 통신이 잘 되는지, 지연 시간, 패킷 손실 등을 확인</li>\n<li><strong>클라이언트 개발 검증</strong>: 메시지 송수신 기능이 정확히 동작하는지 테스트</li>\n<li><strong>프로토콜 디버깅</strong>: TCP/UDP, TLS 등 계층 별 동작 확인</li>\n<li><strong>성능 측정</strong>: RTT(왕복 시간) 측정, 응답 속도 테스트</li>\n</ul>\n<h3 id=\"구현-포인트\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84-%ED%8F%AC%EC%9D%B8%ED%8A%B8\" aria-label=\"구현 포인트 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>구현 포인트</h3>\n<p>이번 실습의 핵심 흐름은 아래와 같습니다.</p>\n<h4 id=\"서버\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84\" aria-label=\"서버 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong>서버</strong></h4>\n<ul>\n<li><code class=\"language-text\">NWListener</code>로 포트 리슨</li>\n<li><code class=\"language-text\">newConnectionHandler</code>에서 <code class=\"language-text\">NWConnection</code> 수락</li>\n<li>연결이 <code class=\"language-text\">.ready</code>가 되면 <code class=\"language-text\">receive</code> 루프로 데이터 수신</li>\n<li>수신한 데이터를 그대로 <code class=\"language-text\">send</code>로 다시 전송</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">Foundation</span>\n<span class=\"token keyword\">import</span> <span class=\"token class-name\">Network</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">EchoServer</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> tcpListener<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWListener</span>\n    <span class=\"token keyword\">let</span> listenerQueue <span class=\"token operator\">=</span> <span class=\"token class-name\">DispatchQueue</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">\"ListenerQueue\"</span></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>\n        port<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWEndpoint</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Port</span>\n    <span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">do</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>tcpListener <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span> <span class=\"token class-name\">NWListener</span><span class=\"token punctuation\">(</span>using<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>tcp<span class=\"token punctuation\">,</span> on<span class=\"token punctuation\">:</span> port<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> error\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"서버를 시작합니다.\"</span></span><span class=\"token punctuation\">)</span>\n        tcpListener<span class=\"token punctuation\">.</span>newConnectionHandler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> connection <span class=\"token keyword\">in</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"새 클라이언트 연결!\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleConnection</span><span class=\"token punctuation\">(</span>connection<span class=\"token punctuation\">:</span> connection<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        tcpListener<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">handleConnection</span><span class=\"token punctuation\">(</span>connection<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWConnection</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">:</span> listenerQueue<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">recieve</span><span class=\"token punctuation\">(</span>on<span class=\"token punctuation\">:</span> connection<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">recieve</span><span class=\"token punctuation\">(</span>on connection<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWConnection</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span>minimumIncompleteLength<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> maximumLength<span class=\"token punctuation\">:</span> <span class=\"token number\">4096</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> content<span class=\"token punctuation\">,</span> contentContext<span class=\"token punctuation\">,</span> isComplete<span class=\"token punctuation\">,</span> error <span class=\"token keyword\">in</span>\n            <span class=\"token keyword\">guard</span> <span class=\"token keyword\">let</span> content <span class=\"token operator\">=</span> content <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">}</span>\n            <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"수신 데이터: </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\"><span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">:</span> content<span class=\"token punctuation\">,</span> encoding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>utf8<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span></span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n\n            connection<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>\n                content<span class=\"token punctuation\">:</span> content<span class=\"token punctuation\">,</span>\n                completion<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token function\">contentProcessed</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> error <span class=\"token keyword\">in</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> error <span class=\"token operator\">=</span> error <span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"재전송 에러: </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">error</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">}</span>\n                    <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">recieve</span><span class=\"token punctuation\">(</span>on<span class=\"token punctuation\">:</span> connection<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"클라이언트\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8\" aria-label=\"클라이언트 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a><strong>클라이언트</strong></h4>\n<ul>\n<li><code class=\"language-text\">NWConnection(host:port:using:)</code>으로 서버에 연결</li>\n<li>연결 <code class=\"language-text\">.ready</code> 이후 원하는 데이터를 <code class=\"language-text\">send</code></li>\n<li><code class=\"language-text\">receive</code>로 서버 응답을 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token class-name\">Foundation</span>\n<span class=\"token keyword\">import</span> <span class=\"token class-name\">Network</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Client</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> connection<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWConnection</span>\n    \n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>endPoint<span class=\"token punctuation\">:</span> <span class=\"token class-name\">NWEndpoint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>connection <span class=\"token operator\">=</span> <span class=\"token class-name\">NWConnection</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> endPoint<span class=\"token punctuation\">,</span> using<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>tcp<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        connection<span class=\"token punctuation\">.</span>stateUpdateHandler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> state <span class=\"token keyword\">in</span>\n            <span class=\"token keyword\">switch</span> state <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">:</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"setup\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token function\">waiting</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"waiting </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">error</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>preparing<span class=\"token punctuation\">:</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"preparing\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>ready<span class=\"token punctuation\">:</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">startRecieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span><span class=\"token function\">failed</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"failed </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">error</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">case</span> <span class=\"token punctuation\">.</span>cancelled<span class=\"token punctuation\">:</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"cancelled\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token attribute atrule\">@unknown</span> <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"none\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        \n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span>queue<span class=\"token punctuation\">:</span> <span class=\"token class-name\">DispatchQueue</span><span class=\"token punctuation\">.</span><span class=\"token function\">global</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        \n        <span class=\"token keyword\">while</span> <span class=\"token keyword\">let</span> input <span class=\"token operator\">=</span> <span class=\"token function\">readLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">send</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">startRecieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span>minimumIncompleteLength<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> maximumLength<span class=\"token punctuation\">:</span> <span class=\"token number\">4096</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> content<span class=\"token punctuation\">,</span> contentContext<span class=\"token punctuation\">,</span> isComplete<span class=\"token punctuation\">,</span> error <span class=\"token keyword\">in</span>\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> content <span class=\"token operator\">=</span> content <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"수신 데이터: </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\"><span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">:</span> content<span class=\"token punctuation\">,</span> encoding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>utf8<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span></span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">startRecieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        \n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function-definition function\">send</span><span class=\"token punctuation\">(</span><span class=\"token omit keyword\">_</span> request<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>using<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>utf8<span class=\"token punctuation\">)</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>content<span class=\"token punctuation\">:</span> data<span class=\"token punctuation\">,</span> completion<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>contentProcessed <span class=\"token punctuation\">{</span> error <span class=\"token keyword\">in</span>\n            <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> error <span class=\"token operator\">=</span> error <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">\"send error: </span><span class=\"token interpolation-punctuation punctuation\">\\(</span><span class=\"token interpolation\">error</span><span class=\"token interpolation-punctuation punctuation\">)</span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"실행테스트\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"실행테스트 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>실행/테스트</h3>\n<ul>\n<li>서버 먼저 실행(포트 9999)</li>\n<li>클라이언트 실행 후 문자열 입력</li>\n<li>기대 결과: 서버/클라이언트 모두에서 동일한 문자열이 출력(에코)</li>\n</ul>\n<h4 id=\"서버-1\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-1\" aria-label=\"서버 1 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>서버</h4>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/e8567e4dd588832bbbbd0934e97178d9/f6862/echo-server.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 11.76470588235294%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAVUlEQVR42o3MTQ5AMBAG0F5Ipx1BDCn9kYZFF+5/l4+KPYu3fSrnjKOcSHvB6CJk3SBLejgf4L2gHzpw24KZP6kaxhAwTwLSDQxp2BcR3Qys5V9ZDS/9gkFuLx9OKAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='echo server' title='' src='/static/e8567e4dd588832bbbbd0934e97178d9/ca1dc/echo-server.png' srcset='/static/e8567e4dd588832bbbbd0934e97178d9/e7570/echo-server.png 170w,\n/static/e8567e4dd588832bbbbd0934e97178d9/f46e7/echo-server.png 340w,\n/static/e8567e4dd588832bbbbd0934e97178d9/ca1dc/echo-server.png 680w,\n/static/e8567e4dd588832bbbbd0934e97178d9/02d09/echo-server.png 1020w,\n/static/e8567e4dd588832bbbbd0934e97178d9/9d567/echo-server.png 1360w,\n/static/e8567e4dd588832bbbbd0934e97178d9/f6862/echo-server.png 1917w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h4 id=\"클라이언트-1\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-1\" aria-label=\"클라이언트 1 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>클라이언트</h4>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/208f2d83f8136e1cde224ba41ed9d455/161f7/echo-server-client.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 24.11764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAArklEQVR42qXO3QqCMByHYa9H58emm7icaWmDjsLK6sAo6P4vYb+WghJ4EHTwsP3HeDenXBdQW21090LT3rE7PSbaatp+XI9PHG49urPG9bKHKjLwTIALDkYZGBs5VbXBSmaGswhRQBASF6HvLXDhex4ICa0ANKKg1GJzbAjmeY5cKZNJiThOFsTzPhnnJPmcfYemYF3XUDZYliXSNB1eXbr4q+GHUkpjoxBC/B18A8wTpHIDb16fAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='echo server client' title='' src='/static/208f2d83f8136e1cde224ba41ed9d455/ca1dc/echo-server-client.png' srcset='/static/208f2d83f8136e1cde224ba41ed9d455/e7570/echo-server-client.png 170w,\n/static/208f2d83f8136e1cde224ba41ed9d455/f46e7/echo-server-client.png 340w,\n/static/208f2d83f8136e1cde224ba41ed9d455/ca1dc/echo-server-client.png 680w,\n/static/208f2d83f8136e1cde224ba41ed9d455/02d09/echo-server-client.png 1020w,\n/static/208f2d83f8136e1cde224ba41ed9d455/161f7/echo-server-client.png 1250w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>마치며</h2>\n<p><code class=\"language-text\">Network.framework</code>를 사용하면 “연결 상태 관리 + 이벤트 기반 송수신”을 비교적 고수준 API로 구성할 수 있어, 간단한 실습부터 실제 제품 코드까지 확장하기가 좋았습니다.<br>\n특히 <code class=\"language-text\">stateUpdateHandler</code>를 중심으로 연결 수명주기를 안정적으로 다루는 감을 잡은 뒤에는 재연결 정책 같은 요구사항도 단계적으로 얹기 쉬운 편이라고 느꼈습니다.</p>\n<h2 id=\"참고-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\"참고 자료 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>참고 자료</h2>\n<ul>\n<li><a href=\"https://developer.apple.com/documentation/network\">Apple Documentation - Network</a></li>\n<li><a href=\"https://developer.apple.com/videos/play/wwdc2018/715/\">WWDC 2018 - Introducing Network.framework: A modern alternative to Sockets</a></li>\n<li><a href=\"https://hahahoho5915.tistory.com/62\">[간단정리] HTTP Request/Response 구조</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/computer-networks/what-is-http-3-how-it-is-different-from-http-2/\">What is HTTP/3? How it is Different From HTTP/2?</a></li>\n</ul>","frontmatter":{"title":"Network.framework로 TCP Echo Server 만들기","date":"August 08, 2025","update":"August 08, 2025","tags":["Swift","iOS","Network","Server"],"series":null},"fields":{"slug":"/network-framework-echo-server/","readingTime":{"minutes":7.47}}},"seriesList":{"edges":[{"node":{"id":"050f3c55-aa6a-53d0-b9c7-2a747e669f52","fields":{"slug":"/swiftui-opensource-memory-leak-solve/"},"frontmatter":{"title":"SwiftUI 라이브러리 메모리 누수 분석과 순환 참조 해결"}}},{"node":{"id":"c76b8cbc-228c-5e2e-bff3-d31a6f4cced1","fields":{"slug":"/network-framework-echo-server/"},"frontmatter":{"title":"Network.framework로 TCP Echo Server 만들기"}}},{"node":{"id":"94e99991-708f-56a6-bd92-27b93f7980d9","fields":{"slug":"/about/"},"frontmatter":{"title":"✋"}}}]},"previous":{"fields":{"slug":"/swiftui-opensource-memory-leak-solve/"},"frontmatter":{"title":"SwiftUI 라이브러리 메모리 누수 분석과 순환 참조 해결"}},"next":null},"pageContext":{"id":"c76b8cbc-228c-5e2e-bff3-d31a6f4cced1","series":null,"previousPostId":"050f3c55-aa6a-53d0-b9c7-2a747e669f52","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}